<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tavnoor's Fav Movies</title>
  <style>
    :root{--bg:#0f172a;--card:#0b1220;--accent:#06b6d4;--glass: rgba(255,255,255,0.03)}
    html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial}
    body{background:linear-gradient(180deg,#071128 0%,#061423 100%);color:#e6eef6;display:flex;align-items:center;justify-content:center;padding:32px}

    .card{width:960px;max-width:96%;background:linear-gradient(180deg,rgba(255,255,255,0.03),transparent);border-radius:16px;padding:28px;box-shadow:0 8px 30px rgba(2,6,23,0.6);backdrop-filter:blur(6px);display:grid;grid-template-columns:1fr 420px;gap:22px}

    header{grid-column:1/-1;display:flex;align-items:center;justify-content:space-between}
    h1{margin:0;font-size:22px}
    p.lead{margin:6px 0 0;color:#bcd4e6;opacity:0.9}

    .left{padding:14px}
    .right{padding:14px;display:flex;flex-direction:column;align-items:center;gap:14px}

    /* Roulette wheel */
    .wheel-wrap{width:380px;height:380px;border-radius:50%;position:relative;display:grid;place-items:center;background:conic-gradient(from 0turn, #0b1220, transparent);box-shadow:inset 0 8px 30px rgba(2,6,23,0.6),0 10px 30px rgba(2,6,23,0.45)}
    .wheel{width:340px;height:340px;border-radius:50%;position:relative;overflow:hidden;transform:rotate(0deg);transition:transform 4s cubic-bezier(.17,.67,.34,1)}
    .slice{position:absolute;left:50%;top:50%;transform-origin:0 0;width:50%;height:50%;display:flex;align-items:center}
    .slice span{transform:translate(-6px,-50%) rotate(-90deg);display:block;padding:6px 8px;font-size:12px;white-space:nowrap}

    .spinner-pointer{width:0;height:0;border-left:16px solid transparent;border-right:16px solid transparent;border-bottom:26px solid var(--accent);position:absolute;top:-14px;left:calc(50% - 16px);filter:drop-shadow(0 6px 8px rgba(6,182,212,0.18))}

    .result{margin-top:8px;font-weight:700;font-size:18px}
    button#spin{background:linear-gradient(90deg,var(--accent),#7c3aed);border:0;padding:12px 18px;border-radius:10px;color:#001;cursor:pointer;font-weight:700;box-shadow:0 8px 20px rgba(7,16,26,0.6)}
    button#spin:active{transform:translateY(1px)}

    .controls{display:flex;gap:8px;align-items:center}

    /* confetti canvas */
    #confetti{position:absolute;left:0;top:0;pointer-events:none}

    /* small screens */
    @media (max-width:900px){.card{grid-template-columns:1fr;}}
  </style>
</head>
<body>
  <div class="card" id="app">
    <header>
      <div>
        <h1>Welcome to Tavnoor's fav movies list</h1>
        <p class="lead">Press the button to get your next watch — the roulette will spin and land on a random movie!</p>
      </div>
      <div style="text-align:right;color:#bcd4e6;opacity:0.9;font-size:13px">Built for you • Lightweight • No external libs</div>
    </header>

    <section class="left">
      <div style="display:flex;gap:12px;align-items:center;flex-wrap:wrap">
        <div class="controls">
          <button id="spin">Press to get your next watch</button>
          <button id="shuffleList" title="Shuffle movies in memory">Shuffle</button>
        </div>
        <div style="margin-left:8px;color:#9fb6cc;font-size:13px">Movies in list: <span id="count">0</span></div>
      </div>

      <h3 style="margin-top:16px">Your movies (you can edit the list in the code or paste a CSV below)</h3>
      <textarea id="moviesInput" style="width:100%;height:160px;border-radius:8px;padding:10px;background:var(--glass);border:1px solid rgba(255,255,255,0.04);color:inherit;resize:vertical">Inception
10 things i hate about you
Definitely maybe
There's something about mary
Notting hill
Ruby sparks
The rewrite
Four weddings and a funeral
About a boy
Mike and dave need wedding dates
The intern
Zodiac
Love actually
21
Sleepless in Seattle
Rumour has it
New year's eve
Made of honor
Pretty woman
Forgetting Sarah marshall
17 again
Sixth sense
Now you see me
Dirty dancing
Devil wears prada
You've got mail
Meet joe black
Admission
Limitless
Speed
Die hard
Office space
Yes man
Hangover
Valentine's day
Wanderlust
Something like heaven
300 cigarettes
Object of my affection
Along came polly
The whole nine yards
Music and lyrics
Prestige
Once upon a time.. in hollywood
Girl next door
500 days of summer
Wedding ringer
Just my luck
50 first date
Much ado mothing
Groundhog day
Serendipity
Valentine's day
Gone girl
Pulp fiction
The devil's advocate
Scent of a woman
That thing you do
King's speach
Inferno
shutter island
Da vinci code
Forrest gump
the terminal
Crazy stupid love
Ugly truth
Cast away
The holiday
Playing it cool
Two night stand
Last night in soho
Vanilla sky
Stardust
Eyes wide shut
Magnolia
Babylon
Basic instinct
Boogie nights
Bridge to terabithia
Family affair
There will be blood
No country for old men
Moonstruck
Kate and leopold
Someone like you
Chicago
Coach carter
Flipped
American beauty
Prisoners
Rain man
Colour of money
Baby driver
Elvis
Arrival
Martian
Anora
The silence of the lambs
Herectic
High fidelity
Juliet naked
Sinners
Late night with the devil
Midnight in paris
Reality bites
Working girl
Cafe society
Begin again
A rainy day in new york
Vicky and cristina go to barcelona
Priceless french
True romance
Love me if you dare </textarea>
      <div style="margin-top:8px;display:flex;gap:8px">
        <button id="loadList">Load list</button>
        <button id="clearList">Clear</button>
      </div>
    </section>

    <aside class="right">
      <div style="position:relative;width:100%;display:flex;flex-direction:column;align-items:center">
        <div class="wheel-wrap" id="wheelWrap">
          <canvas id="confetti" width="760" height="760"></canvas>
          <div class="spinner-pointer" aria-hidden></div>
          <div class="wheel" id="wheel" role="img" aria-label="Movie roulette"></div>
        </div>
        <div class="result" id="result">—</div>
      </div>

      <div style="font-size:13px;color:#bcd4e6;opacity:0.9;text-align:center">
        Tip: You can paste a list (one movie per line) in the left textarea and press "Load list". The wheel will update.
      </div>
    </aside>
  </div>

<script>
// Helper: simple seeded random (for repeatable debugging if desired)
function randBetween(min,max){return Math.random()*(max-min)+min}

// Read movies from textarea and build wheel
function buildWheel(movies){
  const wheel = document.getElementById('wheel');
  wheel.innerHTML = '';
  const n = movies.length;
  if(n===0) return;
  const sliceAngle = 360 / n;
  for(let i=0;i<n;i++){
    const slice = document.createElement('div');
    slice.className = 'slice';
    slice.style.transform = `rotate(${i*sliceAngle}deg) translate(-100%, -100%)`;
    const label = document.createElement('span');
    label.textContent = movies[i];
    slice.appendChild(label);
    wheel.appendChild(slice);
  }
}

// Confetti (lightweight)
class ConfettiParticle{constructor(x,y){this.x=x;this.y=y;this.vx=randBetween(-4,4);this.vy=randBetween(-8,-2);this.life=randBetween(40,90);this.size=randBetween(4,9);this.rot=randBetween(0,360)}update(){this.x+=this.vx;this.y+=this.vy;this.vy+=0.25;this.rot+=4;this.life--}}
function launchConfetti(){const c=document.getElementById('confetti');const ctx=c.getContext('2d');const W=c.width=760;const H=c.height=760;let parts=[];for(let i=0;i<80;i++)parts.push(new ConfettiParticle(W/2,H/2));
function loop(){ctx.clearRect(0,0,W,H);for(let p of parts){ctx.save();ctx.translate(p.x,p.y);ctx.rotate(p.rot*Math.PI/180);ctx.fillRect(-p.size/2,-p.size/2,p.size,p.size);ctx.restore();p.update();}
parts=parts.filter(p=>p.life>0);
if(parts.length>0)requestAnimationFrame(loop);}
loop();}

// Spin logic: pick index randomly, animate wheel rotation to that sector
let movies = [];
const wheelEl = document.getElementById('wheel');
const resultEl = document.getElementById('result');
const countEl = document.getElementById('count');

function refreshFromTextarea(){const raw=document.getElementById('moviesInput').value.trim();movies = raw===''?[]:raw.split(/\n+/).map(s=>s.trim()).filter(Boolean);countEl.textContent = movies.length;buildWheel(movies);}

// animate spin
async function spin(){if(movies.length===0){alert('No movies in list — add some and press Load list.');return}
  document.getElementById('spin').disabled=true;
  // choose a random index
  const chosenIndex = Math.floor(Math.random()*movies.length);
  // compute final rotation: we want the chosen slice to land at pointer (top). Slices are laid with 0deg at first slice start.
  const sliceAngle = 360 / movies.length;
  // To center the slice under the pointer, rotate so that the middle of chosen slice is at 0deg
  const targetAngle = 360 - (chosenIndex * sliceAngle + sliceAngle/2);
  // Add a number of full spins
  const spins = Math.floor(randBetween(3,6));
  const finalDeg = spins*360 + targetAngle + randBetween(-sliceAngle/3, sliceAngle/3);
  wheelEl.style.transition = 'transform 4s cubic-bezier(.17,.67,.34,1)';
  wheelEl.style.transform = `rotate(${finalDeg}deg)`;

  // wait for animation to end
  await new Promise(r=>setTimeout(r,4200));
  const winner = movies[chosenIndex];
  resultEl.textContent = `Watch: ${winner}`;
  launchConfetti();
  document.getElementById('spin').disabled=false;
}

// UI wiring
refreshFromTextarea();

document.getElementById('loadList').addEventListener('click',()=>{refreshFromTextarea();resultEl.textContent='—';});
document.getElementById('clearList').addEventListener('click',()=>{document.getElementById('moviesInput').value='';refreshFromTextarea();resultEl.textContent='—';});

document.getElementById('spin').addEventListener('click',spin);

document.getElementById('shuffleList').addEventListener('click',()=>{movies.sort(()=>Math.random()-0.5);document.getElementById('moviesInput').value=movies.join('\n');refreshFromTextarea();});

// Allow the user to paste a CSV single line, convert commas to newlines when loading
const moviesInput = document.getElementById('moviesInput');
moviesInput.addEventListener('paste',(e)=>{
  setTimeout(()=>{
    const v=moviesInput.value;
    if(v.includes(',')){
      const asLines=v.split(',').map(s=>s.trim()).filter(Boolean).join('\n');
      moviesInput.value=asLines;
    }
  },10);
});

// Accessibility: keyboard shortcut 'Enter' when focus on spin
document.getElementById('spin').addEventListener('keyup',(e)=>{if(e.key==='Enter')spin()});

</script>
</body>
</html>
